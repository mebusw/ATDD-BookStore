*** Settings ***
Documentation     知鸟课程列表接口
...
...               Created By 申健    www.JackyShen.com
...               2014.12.12.
...

Library           RequestsLibrary
Library           Collections
Library           ZhiNiaoLibrary


*** Variables ***
${url_host}     https://test-mlearning.pingan.com.cn:43053


*** Test Cases ***
成功返回课程列表
    ${json}=    Send Get Request To ZhiNiao    /learn/app/courselist.do?sid=140801701883740489877&umId=XIONGYULIN002&curPage=1&numPerPage=15
    Should Be Equal     ${json['code']}   0


Sid失效
    [Document]  这是一个例子
    [Tags]  courselist
    ${json}=    Send Get Request To ZhiNiao    /learn/app/courselist.do
    Should Be Equal     ${json['code']}   -4
    Should Be Equal     ${json['message']}   Sid失效！

几种比较的方式的例子
    Should Contain   abcde   e
    Should Not Contain   abcde   z

    ${three}=    Set Variable   3
    Should Be True    ${three}>2
    Should Not Be True    ${three}>5

    ${legal_codes}=  Evaluate     range(1, 8)
    ${legal_codes}=  Evaluate     [11, 9]
    Should Be Equal As Numbers     ${legal_codes[0]}  11
    Should Be True  9 in ${legal_codes}
    Should Not Be True  7 in ${legal_codes}


*** Keywords ***
Send Get Request To Zhiniao    [Arguments]     ${url_path}
    Create Session  zhiniao   ${url_host}
    ${resp}=    Get Request     zhiniao   /learn/app/courselist.do
    Log Many    ${resp.__dict__}
    #Log    ${resp.json()}
    Should Be Equal As Strings   ${resp.status_code}   200
    ${real}=    Ungzip String   ${resp._content}
    Log     ${real}
    ${json}=    Evaluate    json.loads('''${real}''')   json
    [Return]    ${json}
