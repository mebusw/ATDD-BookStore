*** Settings ***
Test Teardown     Close Browser
Library           Selenium2Library

*** Variables ***
${username}       uperform
${password}       uperform
@{os}       windows    macos    linux
${browser}       firefox

*** Test Cases ***
Built-in Syntax
    Log Many    @{os}
    For Loop
    ${fullName}    Full Name    Jacky    Shen
    Log    ${fullName}
    [Teardown]

Admin Site
    Open Browser    http://127.0.0.1:8000/admin/
    Page Should Contain    admin
    [Teardown]    Close Browser

Login With Wrong Username
    Open Browser    http://127.0.0.1:8000/book/    ${browser}
    Page Should Contain    Welcome to Book Store.
    Login To Public    abcdefg    uperform
    Page Should Contain    Wrong username or password!
    Page Should Contain Element    id=btnLogin

Login With Wrong Password
    Open Browser    http://127.0.0.1:8000/book/
    Page Should Contain    Welcome to Book Store.
    Login To Public    uperform    1234
    Page Should Contain    Wrong username or password!
    Page Should Contain Element    id=btnLogin

Login With Correct Username And Password
    Open Browser    http://127.0.0.1:8000/book/
    Page Should Contain    Welcome to Book Store.
    Login To Public    uperform    uperform
    Page Should Contain    Welcome, uperform. Thanks for logging in
    Page Should Contain Element    id=btnLogout
    Logout From Public

Search For A Word That Is Likely A Title But Not Author
    Open Browser    http://127.0.0.1:8000/book/
    Search With Word    navigation
    Search Results Should Include    Night Navigation
    Search Results Should Include    POINT TO POINT NAVIGATION

Search For A Word That Is Likely An Author But Not Title
    Open Browser    http://127.0.0.1:8000/book/
    Search With Word    Fowler
    Search Results Should Include    Patterns of Enterprise Application Architecture
    Search Results Should Include    Refactoring: Improving the Design of Existing Code

Search For A Word That Is Likely An Author And A Title
    Open Browser    http://127.0.0.1:8000/book/
    Search With Word    brown
    Search Results Should Include    Inferno: A Novel (Robert Langdon)
    Search Results Should Include    Brown Bear, Brown Bear, What Do You See? My First Reader

Search For TSBN Number
    Open Browser    http://127.0.0.1:8000/book/
    Search With Word    9780385537858
    Search Results Should Include    Inferno: A Novel (Robert Langdon)
    Book Detail Should Contain    Inferno: A Novel (Robert Langdon)    9780385537858

*** Keywords ***
For Loop
    @{items}    Evaluate    range(5)
    : FOR    ${var}    IN    @{items}
    \    Log    Hello, ${var}

Full Name
    [Arguments]    ${firstName}    ${lastName}
    [Return]    ${firstName}, \ ${lastName}

Login To Public
    [Arguments]    ${username}    ${password}
    Input Text    id=username    ${username}
    Input Text    id=password    ${password}
    Click Button    id=btnLogin

Logout From Public
    Click Element    id=btnLogout

Search With Word
    [Arguments]    ${q}
    Input Text    id=q    ${q}
    Click Button    id=search

Search Results Should Include
    [Arguments]    ${title}
    Page Should Contain    ${title}

Book Detail Should Contain
    [Arguments]    ${title}    ${ISBN}
    Click Link    id=isbn_${ISBN}
    Page Should Contain    ${title}
    Page Should Contain    ${ISBN}
